Submitting stop request: {
  symbol: 'XRP-USDT',
  position: 'short',
  action: 'buy',
  stop_type: 'sl',
  size: 100,
  trigger_price: 2.85,
  order_price: 2.875,
  reduce_only: false,
  broker_id: undefined,
  memo: 'Test 2b: submit stop loss request with order'
}
-> [Info] stop_request inserted {
  fields: [
    'stop_request',
    'stop_type',
    'instrument_position',
    'state',
    'action',
    'size',
    'trigger_price',
    'order_price',
    'memo',
    'create_time',
    'update_time'
  ],
  args: [
    <Buffer df 8a e8 d2 cb>,
    'sl',
    <Buffer 62 45 1c 33 17 21>,
    <Buffer 62 57 cb>,
    'buy',
    100,
    2.85,
    2.875,
    'Test 2b: submit stop loss request with order',
    2025-11-15T02:45:31.772Z,
    2025-11-15T02:45:31.772Z
  ]
}
{
  result: <Buffer df 8a e8 d2 cb>,
  request: {
    symbol: 'XRP-USDT',
    position: 'short',
    action: 'buy',
    stop_type: 'sl',
    size: 100,
    trigger_price: 2.85,
    order_price: 2.875,
    reduce_only: false,
    broker_id: undefined,
    memo: 'Test 2b: submit stop loss request with order'
  }
}
Submitting stop request: {
  symbol: 'XRP-USDT',
  position: 'short',
  action: 'buy',
  stop_type: 'tp',
  size: 100,
  trigger_price: 1.95,
  order_price: 1.975,
  reduce_only: false,
  broker_id: undefined,
  memo: 'Test 2b: submit take profit request with order'
}
-> [Info] stop_request inserted {
  fields: [
    'stop_request',
    'stop_type',
    'instrument_position',
    'state',
    'action',
    'size',
    'trigger_price',
    'order_price',
    'memo',
    'create_time',
    'update_time'
  ],
  args: [
    <Buffer e4 ba 01 ad 14>,
    'tp',
    <Buffer 62 45 1c 33 17 21>,
    <Buffer 62 57 cb>,
    'buy',
    100,
    1.95,
    1.975,
    'Test 2b: submit take profit request with order',
    2025-11-15T02:45:31.886Z,
    2025-11-15T02:45:31.886Z
  ]
}
{
  result: <Buffer e4 ba 01 ad 14>,
  request: {
    symbol: 'XRP-USDT',
    position: 'short',
    action: 'buy',
    stop_type: 'tp',
    size: 100,
    trigger_price: 1.95,
    order_price: 1.975,
    reduce_only: false,
    broker_id: undefined,
    memo: 'Test 2b: submit take profit request with order'
  }
}
Test 2b: Stop requests submitted, check db for results. [ <Buffer df 8a e8 d2 cb>, <Buffer e4 ba 01 ad 14> ]
Fetched stops from DB: [
  {
    account: <Buffer 24 59 7a>,
    stop_order: null,
    stop_request: <Buffer df 8a e8 d2 cb>,
    tpsl_id: null,
    instrument_position: <Buffer 62 45 1c 33 17 21>,
    instrument: <Buffer 54 e7 5e>,
    symbol: 'XRP-USDT',
    base_currency: <Buffer c2 35 f3>,
    base_symbol: 'XRP',
    quote_currency: <Buffer cb 69 43>,
    quote_symbol: 'USDT',
    position: 'short',
    stop_type: 'sl',
    margin_mode: 'cross',
    auto_trade: 0,
    position_state: <Buffer e8 fc f7>,
    position_status: 'Closed',
    state: <Buffer 62 57 cb>,
    status: 'Queued',
    request_state: <Buffer 62 57 cb>,
    request_status: 'Queued',
    order_state: null,
    order_status: null,
    action: 'buy',
    size: 100,
    actual_size: null,
    trigger_price: 2.85,
    order_price: 2.875,
    reduce_only: 1,
    order_category: null,
    category: null,
    memo: 'Test 2b: submit stop loss request with order',
    broker_id: null,
    create_time: 2025-11-15T02:45:31.772Z,
    update_time: 2025-11-15T02:45:31.772Z
  },
  {
    account: <Buffer 24 59 7a>,
    stop_order: null,
    stop_request: <Buffer e4 ba 01 ad 14>,
    tpsl_id: null,
    instrument_position: <Buffer 62 45 1c 33 17 21>,
    instrument: <Buffer 54 e7 5e>,
    symbol: 'XRP-USDT',
    base_currency: <Buffer c2 35 f3>,
    base_symbol: 'XRP',
    quote_currency: <Buffer cb 69 43>,
    quote_symbol: 'USDT',
    position: 'short',
    stop_type: 'tp',
    margin_mode: 'cross',
    auto_trade: 0,
    position_state: <Buffer e8 fc f7>,
    position_status: 'Closed',
    state: <Buffer 62 57 cb>,
    status: 'Queued',
    request_state: <Buffer 62 57 cb>,
    request_status: 'Queued',
    order_state: null,
    order_status: null,
    action: 'buy',
    size: 100,
    actual_size: null,
    trigger_price: 1.95,
    order_price: 1.975,
    reduce_only: 1,
    order_category: null,
    category: null,
    memo: 'Test 2b: submit take profit request with order',
    broker_id: null,
    create_time: 2025-11-15T02:45:31.886Z,
    update_time: 2025-11-15T02:45:31.886Z
  }
]
